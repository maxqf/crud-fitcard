<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	template="template/ui.xhtml">
	<ui:define name="body">
		<h:form id="form">
		    <p:panel id="panel" header="Estabelecimento" style="margin-bottom:10px;">
		        
		        <p:growl id="messages" showDetail="false" />
		        
		        <h:panelGrid columns="2" cellpadding="5">
		            <p:outputLabel for="razaoSocialId" value="Razão Social" />
		            <p:inputText id="razaoSocialId" value="#{mbCadastro.estabelecimento.razaoSocial}" label="Razão Social"/>
		            
		            <p:outputLabel for="nomeFantasiaId" value="Nome Fantasia" />
		            <p:inputText id="nomeFantasiaId" value="#{mbCadastro.estabelecimento.nomeFantasia}" label="Nome Fantasia"/>
		               
		            <p:outputLabel for="cnpjId" value="CNPJ" /> 
		            <p:inputMask id="cnpjId" value="#{mbCadastro.estabelecimento.cnpj}" label="CPNJ" mask="99.999.999/9999-99"/>
		    
		            <p:outputLabel for="emailId" value="Email" /> 
		            <p:inputText id="emailId" value="#{mbCadastro.estabelecimento.email}" label="Email"/>
		            	            
		            <p:outputLabel for="enderecoId" value="Endereço:" /> 	            
	                <p:inputText id="enderecoId" value="#{mbCadastro.endereco.endereco}" label="Endereço"/>
		            
		            <p:outputLabel for="cidadeId" value="Cidade:" />
		            <p:selectOneMenu id="cidadeId" value="#{mbCadastro.endereco.tbcidade}" process="@this" style="width:150px">
		                <f:selectItem itemLabel="Selecione a cidade" itemValue="" noSelectionOption="true" />
		                <f:selectItems value="#{mbCadastro.cidades}"/>
		            </p:selectOneMenu>

		            <p:outputLabel for="estadoId" value="Estado:" />
		            <p:selectOneMenu id="estadoId" value="#{mbCadastro.estado}" process="@this" style="width:150px">
		                <p:ajax event="change" update="cidadeId"/>
		                <f:selectItem itemLabel="Selecione o estado" itemValue="" noSelectionOption="true" />
		                <f:selectItems value="#{mbCadastro.estados}"/>
		            </p:selectOneMenu>
		          
		            <p:outputLabel for="telefoneId" value="Telefone" /> 
		            <p:inputText id="telefoneId" value="#{mbCadastro.estabelecimento.telefone}" label="Telefone"/>
         
		            <p:outputLabel for="dataCadastroId" value="Data do Cadastro:" /> 
	           		<p:calendar id="dataCadastroId" value="#{mbCadastro.estabelecimento.dataCadastro}" pattern="dd/MM/yyyy" mask="true">
	           			<p:ajax event="blur" />
    				</p:calendar>
	                
		            <p:outputLabel for="categoriaId" value="Categoria:" />
		            <p:selectOneMenu id="categoriaId" value="#{mbCadastro.estabelecimento.tbcategoria}" style="width:150px">
		               <!--  <p:ajax listener="#{dropdownView.onCountryChange}" update="city" /> -->
		                <f:selectItem itemLabel="Selecione a categoria" itemValue="" noSelectionOption="true" />
		                <f:selectItems value="#{mbCadastro.categorias}" />
		            </p:selectOneMenu>
		
	               	<p:outputLabel for="statusId" value="Status:" /> 	            
	                <p:selectOneMenu id="statusId" value="#{mbCadastro.estabelecimento.status}" label="Status">
			            <f:selectItem itemLabel="Ativo" itemValue="true" />
			            <f:selectItem itemLabel="Inativo" itemValue="false" />
			        </p:selectOneMenu>
	                
		        </h:panelGrid>
		    </p:panel>	
		  	<p:commandButton value="Cadastrar" update="panel" actionListener="#{mbCadastro.cadastrar}" style="margin-right:20px;" ajax="false"/>
		 	<p:commandButton value="Resetar" update="panel" process="@this" actionListener="#{mbCadastro.resetaControlador}" style="margin-right:20px;" />
		 	<p:commandButton value="Listagem" action="#{mbCadastro.listar}"/>
		
		</h:form>
		
	</ui:define>
</ui:composition>